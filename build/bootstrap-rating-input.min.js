(function(e){e.fn.rating=function(){function n(t,n,r,i){var s=e(t).find("[data-value="+n+"]");s.removeClass(r).addClass(i);s.prevAll("[data-value]").removeClass(r).addClass(i);s.nextAll("[data-value]").removeClass(i).addClass(r)}function r(t,n,r){var i=e(t);i.find("[data-value]").removeClass(r).addClass(n);i.find(".rating-clear").hide();i.find("input").val("").trigger("change")}var t;for(t=this.length-1;t>=0;t--){var i,s,o,u=e(this[t]),a=u.data("max")||5,f=u.data("min")||0,l=u.data("glyph-full")||"glyphicon-star",c=u.data("glyph-empty")||"glyphicon-star-empty",h=u.data("clearable")||null,p="";for(s=f;s<=a;s++){p+=['<span class="glyphicon ',c,'" data-value="',s,'"></span>'].join("")}if(h){p+=[' <a class="rating-clear" style="display:none;" href="javascript:void">','<span class="glyphicon glyphicon-remove"></span> ',h,"</a>"].join("")}i=['<div class="rating-input">',p,'<input type="hidden" name="',u.attr("name"),'" value="',u.val(),'" id="',u.attr("id"),'" />',"</div>"].join("");u.replaceWith(i)}e(".rating-input").on("mouseenter","[data-value]",function(){var t=e(this);n(t.closest(".rating-input"),t.data("value"))}).on("mouseleave","[data-value]",function(){var t=e(this);var i=t.siblings("input").val();if(i){n(t.closest(".rating-input"),i,c,l)}else{r(t.closest(".rating-input",c,l))}}).on("click","[data-value]",function(t){var n=e(this);var r=n.data("value");n.siblings("input").val(r).trigger("change");n.siblings(".rating-clear").show();t.preventDefault();false}).on("click",".rating-clear",function(t){r(e(this).closest(".rating-input"));t.preventDefault();false}).each(function(){var t=e(this).find("input").val();if(t){n(this,t);e(this).find(".rating-clear").show()}})};e(function(){if(e("input.rating[type=number]").length>0){e("input.rating[type=number]").rating()}})})(jQuery)
